import{E as c,ay as ie,a3 as se,az as L,a4 as U,j as C,a8 as J,aA as le,t as de,s as ce,v as F,_ as x,F as ue,aB as xe,J as pe,K as W,O as A,P as ve}from"./index-55457d82.js";function he(r,e=166){let d;function i(...s){const l=()=>{r.apply(this,s)};clearTimeout(d),d=setTimeout(l,e)}return i.clear=()=>{clearTimeout(d)},i}const ge=["onChange","maxRows","minRows","style","value"];function E(r){return parseInt(r,10)||0}const Te={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function V(r){return r==null||Object.keys(r).length===0||r.outerHeightStyle===0&&!r.overflow}const me=c.forwardRef(function(e,d){const{onChange:i,maxRows:s,minRows:l=1,style:g,value:p}=e,T=ie(e,ge),{current:k}=c.useRef(p!=null),z=c.useRef(null),D=se(d,z),R=c.useRef(null),m=c.useRef(0),[I,_]=c.useState({outerHeightStyle:0}),S=c.useCallback(()=>{const a=z.current,n=L(a).getComputedStyle(a);if(n.width==="0px")return{outerHeightStyle:0};const t=R.current;t.style.width=n.width,t.value=a.value||e.placeholder||"x",t.value.slice(-1)===`
`&&(t.value+=" ");const H=n.boxSizing,f=E(n.paddingBottom)+E(n.paddingTop),h=E(n.borderBottomWidth)+E(n.borderTopWidth),b=t.scrollHeight;t.value="x";const y=t.scrollHeight;let u=b;l&&(u=Math.max(Number(l)*y,u)),s&&(u=Math.min(Number(s)*y,u)),u=Math.max(u,y);const N=u+(H==="border-box"?f+h:0),j=Math.abs(u-b)<=1;return{outerHeightStyle:N,overflow:j}},[s,l,e.placeholder]),$=(a,v)=>{const{outerHeightStyle:n,overflow:t}=v;return m.current<20&&(n>0&&Math.abs((a.outerHeightStyle||0)-n)>1||a.overflow!==t)?(m.current+=1,{overflow:t,outerHeightStyle:n}):a},o=c.useCallback(()=>{const a=S();V(a)||_(v=>$(v,a))},[S]);U(()=>{const a=()=>{const b=S();V(b)||le.flushSync(()=>{_(y=>$(y,b))})},v=()=>{m.current=0,a()};let n;const t=he(v),H=z.current,f=L(H);f.addEventListener("resize",t);let h;return typeof ResizeObserver<"u"&&(h=new ResizeObserver(v),h.observe(H)),()=>{t.clear(),cancelAnimationFrame(n),f.removeEventListener("resize",t),h&&h.disconnect()}},[S]),U(()=>{o()}),c.useEffect(()=>{m.current=0},[p]);const O=a=>{m.current=0,k||o(),i&&i(a)};return C.jsxs(c.Fragment,{children:[C.jsx("textarea",J({value:p,onChange:O,ref:D,rows:l,style:J({height:I.outerHeightStyle,overflow:I.overflow?"hidden":void 0},g)},T)),C.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:R,tabIndex:-1,style:J({},Te.shadow,g,{paddingTop:0,paddingBottom:0})})]})});function fe(r){return ce("MuiTextarea",r)}const be=de("MuiTextarea",["root","textarea","startDecorator","endDecorator","formControl","disabled","error","focused","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft"]),K=be,ye=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","size","color","variant","startDecorator","endDecorator","minRows","maxRows","component","slots","slotProps"],Ce=r=>{const{disabled:e,variant:d,color:i,size:s}=r,l={root:["root",e&&"disabled",d&&`variant${A(d)}`,i&&`color${A(i)}`,s&&`size${A(s)}`],textarea:["textarea"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return ve(l,fe,{})},ze=F("div",{name:"JoyTextarea",slot:"Root",overridesResolver:(r,e)=>e.root})(({theme:r,ownerState:e})=>{var d,i,s,l,g,p;const T=(d=r.variants[`${e.variant}`])==null?void 0:d[e.color];return[x({"--Textarea-radius":r.vars.radius.sm,"--Textarea-gap":"0.5rem","--Textarea-placeholderColor":"inherit","--Textarea-placeholderOpacity":.64,"--Textarea-decoratorColor":r.vars.palette.text.icon,"--Textarea-focused":"0","--Textarea-focusedThickness":r.vars.focus.thickness,"--Textarea-focusedHighlight":(i=r.vars.palette[e.color==="neutral"?"primary":e.color])==null?void 0:i[500],'&:not([data-inverted-colors="false"])':x({},e.instanceColor&&{"--_Textarea-focusedHighlight":(s=r.vars.palette[e.instanceColor==="neutral"?"primary":e.instanceColor])==null?void 0:s[500]},{"--Textarea-focusedHighlight":`var(--_Textarea-focusedHighlight, ${r.vars.palette.focusVisible})`})},e.size==="sm"&&{"--Textarea-minHeight":"2rem","--Textarea-paddingBlock":"calc(0.375rem - 0.5px - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"0.5rem","--Textarea-decoratorChildHeight":"min(1.5rem, var(--Textarea-minHeight))","--Icon-fontSize":r.vars.fontSize.xl},e.size==="md"&&{"--Textarea-minHeight":"2.25rem","--Textarea-paddingBlock":"calc(0.375rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"0.75rem","--Textarea-decoratorChildHeight":"min(1.75rem, var(--Textarea-minHeight))","--Icon-fontSize":r.vars.fontSize.xl2},e.size==="lg"&&{"--Textarea-minHeight":"3rem","--Textarea-paddingBlock":"calc(0.75rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"1rem","--Textarea-gap":"0.75rem","--Textarea-decoratorChildHeight":"min(2.375rem, var(--Textarea-minHeight))","--Icon-fontSize":r.vars.fontSize.xl2},{"--_Textarea-paddingBlock":"max((var(--Textarea-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Textarea-decoratorChildHeight)) / 2, 0px)","--Textarea-decoratorChildRadius":"max(var(--Textarea-radius) - var(--variant-borderWidth, 0px) - var(--_Textarea-paddingBlock), min(var(--_Textarea-paddingBlock) + var(--variant-borderWidth, 0px), var(--Textarea-radius) / 2))","--Button-minHeight":"var(--Textarea-decoratorChildHeight)","--IconButton-size":"var(--Textarea-decoratorChildHeight)","--Button-radius":"var(--Textarea-decoratorChildRadius)","--IconButton-radius":"var(--Textarea-decoratorChildRadius)",boxSizing:"border-box"},e.variant!=="plain"&&{boxShadow:r.shadow.xs},{minWidth:0,minHeight:"var(--Textarea-minHeight)",cursor:"text",position:"relative",display:"flex",flexDirection:"column",paddingInlineStart:"var(--Textarea-paddingInline)",paddingBlock:"var(--Textarea-paddingBlock)",borderRadius:"var(--Textarea-radius)"},r.typography[`body-${e.size}`],T,{backgroundColor:(l=T==null?void 0:T.backgroundColor)!=null?l:r.vars.palette.background.surface,"&:before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Textarea-focusedInset, inset) 0 0 0 calc(var(--Textarea-focused) * var(--Textarea-focusedThickness)) var(--Textarea-focusedHighlight)"}}),{"&:hover":x({},(g=r.variants[`${e.variant}Hover`])==null?void 0:g[e.color],{backgroundColor:null,cursor:"text"}),[`&.${K.disabled}`]:(p=r.variants[`${e.variant}Disabled`])==null?void 0:p[e.color],"&:focus-within::before":{"--Textarea-focused":"1"}}]}),Se=F(me,{name:"JoyTextarea",slot:"Textarea",overridesResolver:(r,e)=>e.textarea})({resize:"none",border:"none",minWidth:0,outline:0,padding:0,paddingInlineEnd:"var(--Textarea-paddingInline)",flex:"auto",alignSelf:"stretch",color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit","&::-webkit-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"}}),He=F("div",{name:"JoyTextarea",slot:"StartDecorator",overridesResolver:(r,e)=>e.startDecorator})({display:"flex",marginInlineStart:"calc(var(--Textarea-paddingBlock) - var(--Textarea-paddingInline))",marginInlineEnd:"var(--Textarea-paddingBlock)",marginBlockEnd:"var(--Textarea-gap)",color:"var(--Textarea-decoratorColor)",cursor:"initial"}),Re=F("div",{name:"JoyTextarea",slot:"EndDecorator",overridesResolver:(r,e)=>e.endDecorator})({display:"flex",marginInlineStart:"calc(var(--Textarea-paddingBlock) - var(--Textarea-paddingInline))",marginInlineEnd:"var(--Textarea-paddingBlock)",marginBlockStart:"var(--Textarea-gap)",color:"var(--Textarea-decoratorColor)",cursor:"initial"}),we=c.forwardRef(function(e,d){var i,s,l,g,p,T,k,z;const D=ue({props:e,name:"JoyTextarea"}),R=xe(D,K),{propsToForward:m,rootStateClasses:I,inputStateClasses:_,getRootProps:S,getInputProps:$,formControl:o,focused:O,error:a=!1,disabled:v=!1,size:n="md",color:t="neutral",variant:H="outlined",startDecorator:f,endDecorator:h,minRows:b,maxRows:y,component:u,slots:N={},slotProps:j={}}=R,Z=pe(R,ye),q=(i=(s=e.disabled)!=null?s:o==null?void 0:o.disabled)!=null?i:v,M=(l=(g=e.error)!=null?g:o==null?void 0:o.error)!=null?l:a,G=(p=(T=e.size)!=null?T:o==null?void 0:o.size)!=null?p:n,Q=(k=e.color)!=null?k:M?"danger":(z=o==null?void 0:o.color)!=null?z:t,w=x({instanceColor:M?"danger":e.color},D,{color:Q,disabled:q,error:M,focused:O,size:G,variant:H}),P=Ce(w),B=x({},Z,{component:u,slots:N,slotProps:j}),[X,Y]=W("root",{ref:d,className:[P.root,I],elementType:ze,externalForwardedProps:B,getSlotProps:S,ownerState:w}),[ee,re]=W("textarea",{additionalProps:{id:o==null?void 0:o.htmlFor,"aria-describedby":o==null?void 0:o["aria-describedby"]},className:[P.textarea,_],elementType:Se,internalForwardedProps:x({},m,{minRows:b,maxRows:y}),externalForwardedProps:B,getSlotProps:$,ownerState:w}),[ae,te]=W("startDecorator",{className:P.startDecorator,elementType:He,externalForwardedProps:B,ownerState:w}),[oe,ne]=W("endDecorator",{className:P.endDecorator,elementType:Re,externalForwardedProps:B,ownerState:w});return C.jsxs(X,x({},Y,{children:[f&&C.jsx(ae,x({},te,{children:f})),C.jsx(ee,x({},re)),h&&C.jsx(oe,x({},ne,{children:h}))]}))}),De=we;export{De as T};
