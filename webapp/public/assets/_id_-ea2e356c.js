import{s as W,t as $,v as P,w as I,x as f,_ as p,y as _,z as B,E as G,F as D,J as F,K as M,N as O,j as s,O as b,P as T,R as j,M as w,c as U,D as V,d as z,S as l,I as A,B as k,Q as E,U as J,W as q,X as Q,Y as H,b as K,h as X,k as Y,T as y,Z as C,$ as S}from"./index-55457d82.js";import{V as Z,a as ss,L as os,A as as}from"./video-3193601f.js";import{u as es}from"./index.esm-bd2deef7.js";import{F as rs,a as ts}from"./FormLabel-c342aa29.js";import"./Textarea-5dd4cd67.js";function is(o){return W("MuiSheet",o)}$("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const ls=["className","color","component","variant","invertedColors","slots","slotProps"],ns=o=>{const{variant:a,color:r}=o,e={root:["root",a&&`variant${b(a)}`,r&&`color${b(r)}`]};return T(e,is,{})},cs=P("div",{name:"JoySheet",slot:"Root",overridesResolver:(o,a)=>a.root})(({theme:o,ownerState:a})=>{var r,e;const t=(r=o.variants[a.variant])==null?void 0:r[a.color],{borderRadius:n,bgcolor:d,backgroundColor:x,background:u}=I({theme:o,ownerState:a},["borderRadius","bgcolor","backgroundColor","background"]),c=f(o,`palette.${d}`)||d||f(o,`palette.${x}`)||x||u||(t==null?void 0:t.backgroundColor)||(t==null?void 0:t.background)||o.vars.palette.background.surface;return[p({"--Icon-color":a.color!=="neutral"||a.variant==="solid"?"currentColor":o.vars.palette.text.icon,"--ListItem-stickyBackground":c==="transparent"?"initial":c,"--Sheet-background":c==="transparent"?"initial":c},n!==void 0&&{"--List-radius":`calc(${n} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${n} - var(--variant-borderWidth, 0px))`},{backgroundColor:o.vars.palette.background.surface,position:"relative"}),p({},o.typography["body-md"],a.variant==="solid"&&a.color&&a.invertedColors&&B(a.color)(o),a.variant==="soft"&&a.color&&a.invertedColors&&_(a.color)(o),(e=o.variants[a.variant])==null?void 0:e[a.color],t)]}),ds=G.forwardRef(function(a,r){const e=D({props:a,name:"JoySheet"}),{className:t,color:n="neutral",component:d="div",variant:x="plain",invertedColors:u=!1,slots:c={},slotProps:v={}}=e,g=F(e,ls),m=p({},e,{color:n,component:d,invertedColors:u,variant:x}),i=ns(m),h=p({},g,{component:d,slots:c,slotProps:v}),[R,L]=M("root",{ref:r,className:O(i.root,t),elementType:cs,externalForwardedProps:h,ownerState:m});return s.jsx(R,p({},L))}),N=ds;function us(o){const a=es({defaultValues:{word:""}}),[r,e]=j.useState(!1),t=a.handleSubmit(async n=>{if(o.onSubmit){e(!0);try{await o.onSubmit(n.word)}finally{e(!1)}}a.reset()});return s.jsx(s.Fragment,{children:s.jsx(w,{open:o.isOpen,onClose:o.onClose,children:s.jsxs(U,{size:"lg",sx:{minWidth:"600px"},children:[s.jsx(V,{children:"NGワード登録"}),s.jsx(z,{children:"NGワードとして指定する内容を入力してください。"}),s.jsx("form",{onSubmit:t,children:s.jsxs(l,{spacing:2,children:[s.jsxs(rs,{children:[s.jsx(ts,{children:"ワード"}),s.jsx(A,{required:!0,...a.register("word")})]}),s.jsx(k,{type:"submit",loading:r,children:"作成"})]})})]})})})}function hs(){var v,g,m;const{id:o}=E(),a=J(o??null),r=o?parseInt(o):null,e=q(o??""),t=Q(o??null),n=H(o??null,{refreshInterval:3e3}),d=K(),[x,u]=j.useState(!1),c=j.useCallback(async i=>{o&&(await X.post$livestream$livestreamid$moderate({parameter:{livestreamid:o},requestBody:{ng_word:i}}),await t.mutate(),d.add({type:"success",title:"NGワードを追加しました",message:`「${i}」をNGワードに追加しました。`},{timeout:3e3}),u(!1))},[o]);return s.jsxs(l,{sx:{mx:2,my:3},gap:2,children:[s.jsxs(l,{direction:"row",gap:2,children:[s.jsxs(l,{direction:"column",sx:{flexBasis:"300px",flexGrow:1},children:[s.jsx(Y,{sx:{mb:3},children:s.jsx(Z,{playlist:(v=e.data)==null?void 0:v.playlist_url})}),s.jsx(ss,{id:o??null})]}),s.jsx(l,{sx:{flexBasis:"250px",flexGrow:1,gap:0},children:s.jsx(os,{type:"real",livestream_id:r??0,is_loading:r===null||a.isLoading})}),s.jsx(us,{isOpen:x,onClose:()=>u(!1),onSubmit:c}),s.jsxs(l,{direction:"column",sx:{flexBasis:"300px",flexGrow:1},children:[s.jsxs(l,{direction:"row",sx:{mb:1,alignItems:"center"},children:[s.jsx(y,{level:"title-lg",children:"NG Word"}),s.jsx(k,{variant:"plain",startDecorator:s.jsx(as,{size:"1rem"}),sx:{ml:"auto"},onClick:()=>u(!0),children:"追加"})]}),s.jsx(N,{variant:"outlined",sx:{borderRadius:"sm"},children:s.jsx(C,{children:(g=t.data)==null?void 0:g.map(i=>s.jsx(S,{children:i.word},i.id))})}),s.jsx(l,{direction:"row",sx:{mt:3,mb:1,alignItems:"center"},children:s.jsx(y,{level:"title-lg",children:"通報されたコメント"})}),s.jsx(N,{variant:"outlined",sx:{borderRadius:"sm"},children:s.jsx(C,{children:(m=n.data)==null?void 0:m.map(i=>{var h;return s.jsx(S,{children:(h=i.livecomment)==null?void 0:h.comment},i.id)})})})]})]}),s.jsx(l,{direction:"row",gap:2,children:s.jsx(l,{sx:{flexBasis:"600px",flexGrow:3}})})]})}export{hs as default};
