import{R as x,b as k,j as e,M as D,c as M,D as _,d as F,S as u,I as L,B as T,e as B,f as G,g as O,h as q,i as z,k as A,A as P,l as V,T as t,G as R,V as $,n as E}from"./index-55457d82.js";import{F as H,a as J}from"./FormLabel-c342aa29.js";function Q(s){const n=x.useRef(null),[j,a]=x.useState(!1),y=k(),h=x.useCallback(async()=>{var o,g,f,r;if(s.onSubmit){a(!0);try{const i=(f=(g=(o=n.current)==null?void 0:o.querySelector("input"))==null?void 0:g.files)==null?void 0:f[0];if(!i)return;if(i.type!=="image/jpeg"){y.add({type:"error",title:"画像形式エラー",message:"画像ファイルはjpeg形式のみ対応しています"});return}const l=await new Promise(d=>{const c=new FileReader;c.onload=m=>{if(!m.currentTarget){d(void 0);return}const p=m.currentTarget.result;d(p)},c.readAsDataURL(i)}),b="data:image/jpeg;base64,";await s.onSubmit((l==null?void 0:l.slice(b.length))??""),(r=s.onClose)==null||r.call(s)}finally{a(!1)}}},[s.onSubmit,s.onClose]);return e.jsx(e.Fragment,{children:e.jsx(D,{open:s.isOpen,onClose:s.onClose,children:e.jsxs(M,{size:"lg",sx:{minWidth:"600px"},children:[e.jsx(_,{children:"アイコン変更"}),e.jsx(F,{children:"アイコンの画像ファイルを指定してください。"}),e.jsx("form",{onSubmit:h,children:e.jsxs(u,{spacing:2,children:[e.jsxs(H,{children:[e.jsx(J,{children:"アイコン画像ファイル Jpeg画像のみ対応"}),e.jsx(L,{ref:n,type:"file",required:!0,sx:{p:1}})]}),e.jsx(T,{onClick:h,loading:j,children:"変更"})]})})]})})})}function N(){var r,i,v,l,b,d,c,m,p,w,C;const s=window.location.hostname.split(".")[0],n=B(s??null),j=G(),a=O(s??null),y=j.data!==void 0&&((r=j.data)==null?void 0:r.name)===s,[h,o]=x.useState(!1),g=x.useCallback(async S=>{await q.post$icon({requestBody:{image:S}}),location.reload()},[]),f=z(s??null);return e.jsxs(u,{sx:{mx:2,my:3},gap:3,children:[e.jsxs(I,{children:[e.jsx(Q,{isOpen:h,onSubmit:g,onClose:()=>o(!1)}),e.jsxs(u,{direction:"row",gap:2,alignItems:"center",children:[e.jsxs(A,{children:[e.jsx(P,{ratio:1,sx:{borderRadius:"50%",width:"100px"},children:e.jsx("img",{src:V((i=n.data)==null?void 0:i.name),loading:"lazy"})}),y&&e.jsx(T,{onClick:()=>o(!0),sx:{width:"100%",mt:1},size:"sm",variant:"soft",children:"画像変更"})]}),e.jsxs(u,{spacing:1,children:[e.jsx(t,{level:"h3",children:(v=n.data)==null?void 0:v.name}),e.jsxs(u,{direction:"row",spacing:2,children:[e.jsxs(t,{level:"body-sm",children:["ランキング",(l=a.data)==null?void 0:l.rank,"位"]}),e.jsxs(t,{level:"body-sm",children:["コメント数 ",(b=a.data)==null?void 0:b.total_livecomments]}),e.jsxs(t,{level:"body-sm",children:["リアクション数 ",(d=a.data)==null?void 0:d.total_reactions]}),e.jsxs(t,{level:"body-sm",children:["Tip数 ",(c=a.data)==null?void 0:c.total_tip,"ISU"]}),e.jsxs(t,{level:"body-sm",children:["視聴者数 ",(m=a.data)==null?void 0:m.viewers_count]}),e.jsxs(t,{level:"body-sm",children:["好きな絵文字",((p=a.data)==null?void 0:p.favorite_emoji)&&e.jsx("em-emoji",{shortcodes:`:${a.data.favorite_emoji}:`,set:"twitter"})]})]}),e.jsx(t,{level:"body-sm",children:(w=n.data)==null?void 0:w.description})]})]})]}),e.jsx(I,{children:e.jsx(R,{container:!0,spacing:3,columns:3,flexGrow:1,sx:{padding:2},children:(C=f.data)==null?void 0:C.map((S,U)=>e.jsx(R,{xs:1,children:e.jsx($,{liveSteram:S})},U))})})]})}const I=E.div`
  width: 1000px;
  margin: 0 auto;
`;export{N as default};
